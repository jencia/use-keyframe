(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1272:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(1273)},1273:function(module,exports,__webpack_require__){},1274:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(458);module._StorybookPreserveDecorators=!0,Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)([__webpack_require__(1301)],module)}.call(this,__webpack_require__(1275)(module))},1301:function(module,exports,__webpack_require__){var map={"./0-guide/introduction.stories.mdx":1302,"./0-guide/quickStart.stories.mdx":1303,"./core/useKeyframe/useKeyframe.stories.tsx":1313,"./core/useTimeline/useTimeline.stories.tsx":1310,"./plugin/plugin.stories.mdx":1306,"./util/EventBus.stories.mdx":1307,"./util/useTimeout.stories.mdx":1308};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=1301},1302:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",(function(){return __page}));__webpack_require__(5),__webpack_require__(10),__webpack_require__(2),__webpack_require__(4),__webpack_require__(41),__webpack_require__(146),__webpack_require__(36),__webpack_require__(147),__webpack_require__(0);var _mdx_js_react__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(1),_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(11);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _extends(){return(_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],0<=excluded.indexOf(key)||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={},_ref2=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_10__.Meta,{title:"Guide|Introduction",mdxType:"Meta"}),_ref3=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("p",null,"这是一个用于开发补间动画的 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"p"},"react hook")," 库，补间动画又称为关键帧动画，根据设置各个关键点的状态来形成一段动画。由于这套解决方案是围绕着关键帧展开的，所以命名为 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"p"},"use-keyframe"),"。"),_ref4=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("p",null,"这里提供了一套在 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"p"},"react")," 开发补间动画的解决方案。它更符合 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"p"},"react")," 的开发思维，能够与组件化思维相结合。提倡用数据去操作视图，而不是绑定 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"p"},"DOM")," 改变其属性。你可以拿到相关的动画数据，这些数据可以绑定在任何一个视图上，比如 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"p"},"div")," 、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"p"},"svg"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"p"},"canvas"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"p"},"组件"),"，也可以在 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"p"},"React Native")," 上使用，具有较强的灵活性。"),_ref5=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("p",null,"这里还提供了一系列帮助你开发动画的工具，解决各个动画的交互与协助问题，帮助你开发出更具有可读性和维护性的动画。同时也提供了一些动画调试工具，帮助你开发出效果更好的动画。"),_ref6=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("p",null,"这里提供的方法都是比较底层的方法，你可以很容易的进行二次开发，做出更符合当前业务场景的方法。还支持插件扩展，你可以将一系列动画封装成插件，复用于更多地方，为公司积累一系列动画技术沉淀。"),_ref7=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("p",null,"我在公司经常需要开发一些可视化大屏项目，需要做大量的动画。公司技术栈用的是 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"p"},"react")," 。市面上的动画库基本上没有 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"p"},"react")," 版本，不管是不是 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"p"},"react")," 版本，大多是通过操作 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"p"},"DOM")," 来实现动画。我试过很多方案，使用体验都是不太好，或者说是跟 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"p"},"react")," 很难结合，到后面维护性都会变得很差。"),_ref8=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("p",null,"后来市面上也出了一些不错的 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"p"},"react")," 动画库，比如 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"p"},"react-motion")," 、 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"p"},"react-spring")," 。在有些时候他们确实很好用，但一旦涉及到顺序动画，需要一系列动画组合起来的复杂动画，这时候就很难受了。"),_ref9=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("p",null,"当我看到 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"p"},"react-use")," 里面的 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"p"},"useRaf")," 方法后，我就突然有了灵感，决定自己写一个库。在最近的一次项目里不断摸索和实践，形成了现在这个库。虽然现在还不够完善，但后续的内容已经在脑子里了，后续会持续完善它。"),_ref10=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("p",null,"动画库的选择应该根据业务场景决定，本库定位为补间（关键帧）动画库，以关键帧为中心展开的解决方案。"),_ref11=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("p",null,"目前提供的核心方法就两个，",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"p"},"useKeyframe")," 和 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"p"},"useTimeline")," ;"),_ref12=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("p",null,"这是最小单位的关键帧动画，只设置了一个关键帧，当然起始位置本身也是一个关键帧，就构成了两个关键帧的动画。"),_ref13=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("p",null,"动画其实就是一个从 0 到 1 的过程，作为一个最小单位的动画，当然返回的自然是 0 到 1 的值，只需要你传入动画的持续时间即可。动画的终点是 1 ，所以你可以直接根据你想到达的值乘以这个数就是你想要的效果。"),_ref14=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("p",null,"这个相当于一条时间线，用来管理所有在上面的关键帧。"),_ref15=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("p",null,"一个复杂动画通常是一段顺序动画，也就是定义好几个关键帧，然后串在一起形成个大动画。这边的实现方式就是在 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"p"},"useTimeline")," 上面放入多个 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"p"},"useKeyframe")," 。"),_ref16=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"p"},"useTimeline")," 会按顺序将 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"p"},"useKeyframe")," 的动画一个接一个的运行过去，当然这只是最基本的。中间可能会有几个动画需要停顿下；可能会运动到一半突然回去；可能是走几步停下来，触发钩子后再继续走。这边提供了一套关键帧的管理体系。"),_ref17=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("p",null,"这个方法是针对按顺序执行的，异步执行的动画。如果需要一些动画同步执行，你可以另外开一条时间线。"),_ref18=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("p",null,"这里我们来从开发的角度思考下什么是动画。"),_ref19=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("p",null,"从宏观角度看，动画是一块会发生变化的画面。在 Web 应用中，画面的变化是由局部几块图形在变化。所以往细的说，动画是由一个或多个图形发生变化。但在开发中不会去同时处理多个图形，都是一个个分别处理，所以在开发中动画就是一个会发生变化的图形。"),_ref20=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("p",null,"图形如何变化，是需要控制度的，用力过度或者发生不合理的变化，就会让人感觉到花里花哨。一个图形的运动最好是能符合现实中的物理现象，比如运动惯性、重力加速带，否则会让人感觉到不适。一个图形能动起来一定是需要一个合理的外力，除非这个图形描述的是某个生物，只有生物才会有自驱力。"),_ref21=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("p",null,"图形发生变化，从开发的角度看就是图形的属性配置发生改变。无论图形如何改变，都是需要一个动力驱动，无论是自驱力还是外力作用都属于动力驱动。"),_ref22=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("p",null,"总的来说，动画就是动力驱动图形发生改变，而如何改变，就涉及到算法处理。所以动画是由动力、算法、图形组成。",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"p"},"use-keyframe")," 就是以这样的开发理念做的设计，举个例子来讲："),_ref23=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"li"},"useKeyframe")," 提供了动力来源，花费 2000 毫秒的时间 n 值从 0 变化到 1"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"li"},"n * 500")," 是将动力数据做加工，转变成从 0 变化到 500，这就是简单的算法处理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"li"},"Box")," 是一个图形组件，x 代表 x 轴位置，将加工后的数据作用到图形后，图形就形成从 0 移动到 500 位置的动画")),_ref24=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("p",null,"以上就是我认为的最佳开发方案，创造 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("inlineCode",{parentName:"p"},"use-keyframe")," 的初衷是为了更好的实现这套方案，开发目标是提供更多动力来源和算法辅助工具、更好的做图形关联。");function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,["components"]);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),_ref2,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("h1",{id:"简介"},"简介"),_ref3,_ref4,_ref5,_ref6,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("h1",{id:"背景"},"背景"),_ref7,_ref8,_ref9,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("h1",{id:"动画实现思路"},"动画实现思路"),_ref10,_ref11,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("h2",{id:"usekeyframe"},"useKeyframe"),_ref12,_ref13,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("p",null,"具体讲解请移步到 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("a",{parentName:"p",href:"?path=/docs/core-usekeyframe--demo-1"},"useKeyframe 专题")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("h2",{id:"usetimeline"},"useTimeline"),_ref14,_ref15,_ref16,_ref17,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("p",null,"具体讲解请移步到 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("a",{parentName:"p",href:"?path=/docs/core-usetimeline--demo-1"},"useTimeline 专题")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("h1",{id:"动画开发思想"},"动画开发思想"),_ref18,_ref19,_ref20,_ref21,_ref22,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("code",{parentName:"pre",className:"language-jsx"},"// 动力\nconst [n] = useKeyframe(2000)\n\n// 算法\nconst x = n * 500\n\n// 图形\n<Box x={x} />\n")),_ref23,_ref24,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("p",null,"这一章节的介绍就到这里，接下来点 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("a",{parentName:"p",href:"?path=/docs/guide-quickstart--page"},"快速入门")," 开始尝试吧。"))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function(){throw new Error("Docs-only story")};__page.story={parameters:{docsOnly:!0}};var componentMeta={title:"Guide|Introduction",includeStories:["__page"]};componentMeta.parameters=componentMeta.parameters||{};var _ref25=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_10__.AddContext,{mdxStoryNameToKey:{},mdxComponentMeta:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)(MDXContent,null));componentMeta.parameters.docs=_objectSpread(_objectSpread({},componentMeta.parameters.docs||{}),{},{page:function page(){return _ref25}}),__webpack_exports__.default=componentMeta},1303:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",(function(){return __page}));__webpack_require__(5),__webpack_require__(10),__webpack_require__(2),__webpack_require__(4),__webpack_require__(41),__webpack_require__(146),__webpack_require__(36),__webpack_require__(147),__webpack_require__(0);var _mdx_js_react__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(1),_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(11);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _extends(){return(_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],0<=excluded.indexOf(key)||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={},_ref2=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_10__.Meta,{title:"Guide|QuickStart",mdxType:"Meta"}),_ref3=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("p",null,"暂时还没发布"),_ref4=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_10__.Preview,{mdxType:"Preview"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_10__.Story,{id:"core-usekeyframe--demo-1",mdxType:"Story"}));function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,["components"]);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),_ref2,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("h1",{id:"快速入门"},"快速入门"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("h2",{id:"安装"},"安装"),_ref3,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("h2",{id:"使用"},"使用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("code",{parentName:"pre",className:"language-jsx"},"import { useKeyframe } from 'use-keyframe';\n\nexport default () => {\n  const [n] = useKeyframe(2000);\n\n  return <div style={{ transform: `translateX(${n * 300}px)` }}></div>;\n}\n")),_ref4)}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function(){throw new Error("Docs-only story")};__page.story={parameters:{docsOnly:!0}};var componentMeta={title:"Guide|QuickStart",includeStories:["__page"]};componentMeta.parameters=componentMeta.parameters||{};var _ref5=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_10__.AddContext,{mdxStoryNameToKey:{},mdxComponentMeta:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)(MDXContent,null));componentMeta.parameters.docs=_objectSpread(_objectSpread({},componentMeta.parameters.docs||{}),{},{page:function page(){return _ref5}}),__webpack_exports__.default=componentMeta},1306:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",(function(){return __page}));__webpack_require__(5),__webpack_require__(10),__webpack_require__(2),__webpack_require__(4),__webpack_require__(41),__webpack_require__(146),__webpack_require__(36),__webpack_require__(147),__webpack_require__(0);var _mdx_js_react__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(1),_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(11);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _extends(){return(_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],0<=excluded.indexOf(key)||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={},_ref2=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_10__.Meta,{title:"plugin|useGravity",mdxType:"Meta"}),_ref3=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("p",null,"文档编写中...");function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,["components"]);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),_ref2,_ref3)}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function(){throw new Error("Docs-only story")};__page.story={parameters:{docsOnly:!0}};var componentMeta={title:"plugin|useGravity",includeStories:["__page"]};componentMeta.parameters=componentMeta.parameters||{};var _ref4=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_10__.AddContext,{mdxStoryNameToKey:{},mdxComponentMeta:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)(MDXContent,null));componentMeta.parameters.docs=_objectSpread(_objectSpread({},componentMeta.parameters.docs||{}),{},{page:function page(){return _ref4}}),__webpack_exports__.default=componentMeta},1307:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",(function(){return __page}));__webpack_require__(5),__webpack_require__(10),__webpack_require__(2),__webpack_require__(4),__webpack_require__(41),__webpack_require__(146),__webpack_require__(36),__webpack_require__(147),__webpack_require__(0);var _mdx_js_react__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(1),_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(11);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _extends(){return(_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],0<=excluded.indexOf(key)||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={},_ref2=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_10__.Meta,{title:"util|EventBus",mdxType:"Meta"}),_ref3=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("p",null,"文档编写中...");function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,["components"]);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),_ref2,_ref3)}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function(){throw new Error("Docs-only story")};__page.story={parameters:{docsOnly:!0}};var componentMeta={title:"util|EventBus",includeStories:["__page"]};componentMeta.parameters=componentMeta.parameters||{};var _ref4=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_10__.AddContext,{mdxStoryNameToKey:{},mdxComponentMeta:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)(MDXContent,null));componentMeta.parameters.docs=_objectSpread(_objectSpread({},componentMeta.parameters.docs||{}),{},{page:function page(){return _ref4}}),__webpack_exports__.default=componentMeta},1308:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",(function(){return __page}));__webpack_require__(5),__webpack_require__(10),__webpack_require__(2),__webpack_require__(4),__webpack_require__(41),__webpack_require__(146),__webpack_require__(36),__webpack_require__(147),__webpack_require__(0);var _mdx_js_react__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(1),_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(11);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _extends(){return(_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],0<=excluded.indexOf(key)||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={},_ref2=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_10__.Meta,{title:"util|useTimeout",mdxType:"Meta"}),_ref3=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("p",null,"文档编写中...");function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,["components"]);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),_ref2,_ref3)}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function(){throw new Error("Docs-only story")};__page.story={parameters:{docsOnly:!0}};var componentMeta={title:"util|useTimeout",includeStories:["__page"]};componentMeta.parameters=componentMeta.parameters||{};var _ref4=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_10__.AddContext,{mdxStoryNameToKey:{},mdxComponentMeta:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_9__.mdx)(MDXContent,null));componentMeta.parameters.docs=_objectSpread(_objectSpread({},componentMeta.parameters.docs||{}),{},{page:function page(){return _ref4}}),__webpack_exports__.default=componentMeta},1310:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Syntax",(function(){return Syntax})),__webpack_require__.d(__webpack_exports__,"Demo1",(function(){return Demo1})),__webpack_require__.d(__webpack_exports__,"Demo2",(function(){return Demo2}));var slicedToArray=__webpack_require__(44),react=__webpack_require__(0),react_default=__webpack_require__.n(react),useKeyframe=__webpack_require__(87),esm_typeof=(__webpack_require__(13),__webpack_require__(120)),toConsumableArray=__webpack_require__(459);var useTimeline=function(allKeyframe){for(var delayList=allKeyframe.map((function(v){return v[2]})).map((function(v,i){switch(Object(esm_typeof.a)(v)){case"number":return v;case"string":return+v||0;case"function":return v(i)||0;default:return 0}})),_useAllDelayKeyframe=function useAllDelayKeyframe(keyframe,delayList){for(var delayRafFn,allDelayKeyframe=Object(toConsumableArray.a)(keyframe),mapOriginalStep=keyframe.map((function(_,i){return i})),stepCountList=keyframe.map((function(){return 1})),_i=allDelayKeyframe.length-1;0<=_i;_i--)delayRafFn=Object(useKeyframe.a)(delayList[_i]),0<delayList[_i]&&(allDelayKeyframe.splice(_i,0,[delayRafFn,0]),mapOriginalStep.splice(_i,0,_i),stepCountList[_i]=2);return[allDelayKeyframe,mapOriginalStep,stepCountList]}(allKeyframe,delayList),_useAllDelayKeyframe2=Object(slicedToArray.a)(_useAllDelayKeyframe,3),allDelayKeyframe=_useAllDelayKeyframe2[0],mapOriginalStep=_useAllDelayKeyframe2[1],stepCountList=_useAllDelayKeyframe2[2],keyframeDataList=allDelayKeyframe.map((function(v){return v[0]})),targetDataList=allDelayKeyframe.map((function(v){return v[1]||0})),allNum=keyframeDataList.map((function(v){return v[0]})),allFrame=keyframeDataList.map((function(v){return v[1]})),allCompleted=Object(react.useRef)(!1),allPaused=Object(react.useRef)((allFrame[0]||{}).paused),allReversed=Object(react.useRef)(!1),currStep=Object(react.useRef)(0),playStepCount=Object(react.useRef)(0),_useReducer=Object(react.useReducer)((function(n){return n+1}),0),update=Object(slicedToArray.a)(_useReducer,2)[1],_loop=function(){var _Object$entries$_i=Object(slicedToArray.a)(_Object$entries[_i],2),key=_Object$entries$_i[0],frame=_Object$entries$_i[1],i=+key;frame.useOnComplete((function(){if(playStepCount.current-=1,allReversed.current||i===allFrame.length-1)if(allReversed.current&&0!==i){var prevIndex=i-1;0<playStepCount.current?(currStep.current=prevIndex,allFrame[prevIndex].reverse()):allPaused.current=!0}else allPaused.current=!0,allCompleted.current=!0;else{var nextIndex=i+1;0<playStepCount.current?(currStep.current=nextIndex,allFrame[nextIndex].play()):allPaused.current=!0}update()}))},_i=0,_Object$entries=Object.entries(allFrame);_i<_Object$entries.length;_i++)_loop();var progress=allFrame.reduce((function(rs,frame,_,arr){return rs+frame.progress/arr.length}),0),result=targetDataList.map((function(v,i){return function getCurrData(value,index,n,mapOriginalStep){var zIndex=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0;if(2<zIndex)return 0;switch(Object(esm_typeof.a)(value)){case"number":return n*value;case"string":return isNaN(+value)?n:n*+value;case"function":return 0===zIndex?function(sum){return value(n,mapOriginalStep[index],sum)}:value(n,mapOriginalStep[index]);case"object":return Object.keys(value).forEach((function(key){value[key]=getCurrData(value[key],index,n,mapOriginalStep,zIndex+1)})),value;default:return n}}(v,i,allNum[i],mapOriginalStep)})).map((function(v){return"function"==typeof v?v:"number"==typeof v?{__value:v}:v})).reduce((function(rs,targetData,i){return 0===i?targetData:function getNumSummation(sum,targetData){var v,summation=function(v){Object.keys(v).forEach((function(key){sum[key]=(sum[key]||0)+v[key]}))};if("object"===Object(esm_typeof.a)(targetData))summation(targetData);else{var data=targetData((v=sum,1===Object.keys(v).length&&sum.__value?sum.__value:sum));switch(Object(esm_typeof.a)(data)){case"number":sum.__value=(sum.__value||0)+data;break;case"string":sum.__value=(sum.__value||0)+(+data||0);break;case"object":summation(data)}}return sum}(rs,targetData)}),{});1===Object.keys(result).length&&result.__value&&(result=result.__value);var start=function(){var isReverse=0<arguments.length&&void 0!==arguments[0]&&arguments[0],stepCount=1<arguments.length&&void 0!==arguments[1]?arguments[1]:allFrame.length;if(void 0===isReverse&&(isReverse=allReversed.current),allCompleted.current)currStep.current=isReverse?allFrame.length-1:0,allFrame.forEach((function(frame){return frame.seek(+isReverse,isReverse)}));else{var currFrame=allFrame[currStep.current];currFrame.completed&&currFrame.reversed===isReverse&&(currStep.current+=isReverse?-1:1)}if(allPaused.current=!1,allReversed.current=isReverse,allCompleted.current=!1,stepCount!==allFrame.length){var allStepCount=stepCountList.reduce((function(rs,v,i){return rs.concat(v+rs[i])}),[0]),_currStep=currStep.current+ +allReversed.current,sign=allReversed.current?-1:1,currStepIndex=allStepCount.indexOf(_currStep);-1===currStepIndex&&(currStepIndex=allStepCount.indexOf(_currStep-sign));var nextIndex=currStepIndex+stepCount*sign;playStepCount.current=Math.abs(allStepCount[nextIndex]-_currStep)}else playStepCount.current=stepCount;allFrame[currStep.current][isReverse?"reverse":"play"]()},play=function(){start(!1)};return[result,{start:start,completed:allCompleted.current,paused:allPaused.current,reversed:allReversed.current,progress:progress,useOnComplete:function useOnComplete(fn,index){var _index=void 0!==index?mapOriginalStep[allReversed.current?"indexOf":"lastIndexOf"](index):allReversed.current?0:allFrame.length-1;allFrame[_index].useOnComplete(fn)},play:play,pause:function pause(){allPaused.current=!0,allFrame[currStep.current].pause()},reverse:function reverse(){start(!0)},seek:function seek(){var elapsed=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,isReverse=1<arguments.length?arguments[1]:void 0,currReversed=void 0===isReverse?allReversed.current:isReverse,index=Math.floor(elapsed*allNum.length);allFrame.forEach((function(frame,i){i<index?frame.seek(1):i>index?frame.seek(0):(currStep.current=index,allFrame[index].seek(elapsed*allNum.length-index))})),allPaused.current=!0,allReversed.current=currReversed,allCompleted.current=elapsed===+!currReversed},restart:function restart(){currStep.current=0,allFrame.forEach((function(frame){return frame.seek(0,!1)})),play()},nextStep:function nextStep(){var stepCount=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,isReverse=1<arguments.length&&void 0!==arguments[1]&&arguments[1];start(isReverse,stepCount)}}]},esm=(__webpack_require__(5),__webpack_require__(10),__webpack_require__(2),__webpack_require__(4),__webpack_require__(1)),blocks=__webpack_require__(11);function _extends(){return(_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],0<=excluded.indexOf(key)||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={},_ref2=Object(esm.mdx)(blocks.Story,{id:"core-usetimeline--syntax",mdxType:"Story"}),_ref3=Object(esm.mdx)("p",null,"语法："),_ref4=Object(esm.mdx)("p",null,"参数说明："),_ref5=Object(esm.mdx)("p",null,Object(esm.mdx)("inlineCode",{parentName:"p"},"useTimeline")," 接收一个参数，值为一个数组，里面的元素都是 ",Object(esm.mdx)("inlineCode",{parentName:"p"},"keyframeType")," 类型。"),_ref6=Object(esm.mdx)("ul",null,Object(esm.mdx)("li",{parentName:"ul"},Object(esm.mdx)("inlineCode",{parentName:"li"},"keyframeType"),Object(esm.mdx)("ul",{parentName:"li"},Object(esm.mdx)("li",{parentName:"ul"},Object(esm.mdx)("inlineCode",{parentName:"li"},"keyframe"),"：关键帧动画的执行结果，返回值与 ",Object(esm.mdx)("inlineCode",{parentName:"li"},"useKeyframe")," 一致即可。"),Object(esm.mdx)("li",{parentName:"ul"},"第二个参数当前阶段动画的终点值。"),Object(esm.mdx)("li",{parentName:"ul"},"第三个参数是延迟时间，传字符串会转成数字，传函数会取执行后的返回值，传数字直接使用，其他类型或者传负数都会当成0处理。"))),Object(esm.mdx)("li",{parentName:"ul"},Object(esm.mdx)("inlineCode",{parentName:"li"},"data"),"：根据各个阶段动画的进度和终点值算出的当前动画数据"),Object(esm.mdx)("li",{parentName:"ul"},Object(esm.mdx)("inlineCode",{parentName:"li"},"timeline"),": 基本与 ",Object(esm.mdx)("inlineCode",{parentName:"li"},"useKeyframe")," 一致，不同的是如下",Object(esm.mdx)("ul",{parentName:"li"},Object(esm.mdx)("li",{parentName:"ul"},Object(esm.mdx)("inlineCode",{parentName:"li"},"start(isReverse?: boolean, stepCount?: number)"),"：多了第二个参数，用来指定运动步数，一步代表一个阶段的动画。"),Object(esm.mdx)("li",{parentName:"ul"},Object(esm.mdx)("inlineCode",{parentName:"li"},"nextStep(stepCount?: number, isReverse?: boolean)"),"：\b逐步运动，可以指定运动步数和方向。")))),_ref7=Object(esm.mdx)(blocks.Preview,{isColumn:!0,mdxType:"Preview"},Object(esm.mdx)("h4",{className:"preview-title"},"基本使用"),Object(esm.mdx)(blocks.Story,{id:"core-usetimeline--demo-1",mdxType:"Story"})),_ref8=Object(esm.mdx)(blocks.Preview,{isColumn:!0,mdxType:"Preview"},Object(esm.mdx)("h4",{className:"preview-title"},"综合例子"),Object(esm.mdx)(blocks.Story,{id:"core-usetimeline--demo-2",mdxType:"Story"}));function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,["components"]);return Object(esm.mdx)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),_ref2,Object(esm.mdx)("h1",{id:"usetimeline"},"useTimeline"),_ref3,Object(esm.mdx)("pre",null,Object(esm.mdx)("code",{parentName:"pre",className:"language-ts"},"type keyframeType = [keyframe, any, any?];\nconst [data, timeline] = useTimeline(keyframeType[]);\n")),_ref4,_ref5,_ref6,_ref7,_ref8)}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0,MDXContent.__docgenInfo={description:"",methods:[],displayName:"MDXContent"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/core/useTimeline/useTimeline.mdx"]={name:"MDXContent",docgenInfo:MDXContent.__docgenInfo,path:"src/core/useTimeline/useTimeline.mdx"});__webpack_require__(193).withSource;var addSourceDecorator=__webpack_require__(193).addSource,__SOURCE_PREFIX__="/Users/jencia/Workspace/github/xxreact-xxuse-xxtween/src/core/useTimeline",__STORY__="import React from 'react';\nimport { useKeyframe, useTimeline } from '../../';\nimport mdx from './useTimeline.mdx';\n\nexport default {\n  title: 'core|useTimeline',\n  parameters: {\n    docs: { page: mdx }\n  }\n}\n\nexport const Syntax = () => '';\n\nexport const Demo1 = () => {\n  const [x, frame] = useTimeline([\n    [useKeyframe(200), 200],\n    [useKeyframe(1000), 100],\n    [useKeyframe(300), 200],\n  ]);\n\n  return (\n    <>\n      <div\n        className=\"ball\"\n        style={{ transform: `translateX(${x}px)` }}\n      />\n      <p><button onClick={frame.play}>动起来</button></p>\n    </>\n  );\n};\n\nexport const Demo2 = () => {\n  const [{ x, y, rotate }, timeline] = useTimeline([\n    [useKeyframe(1500, 'inQuint'), { x: 500 }],\n    [useKeyframe(1000, 'linear'), { x: -300, y: 100, rotate: -360 }],\n  ]);\n\n  timeline.useOnComplete(() => {\n    console.log('animate completed');\n  })\n\n  return (\n    <div>\n      <div\n        className=\"box\"\n        style={{ transform: `translate(${x}px, ${y}px) rotate(${rotate}deg)` }}\n      />\n      <ul>\n        {/* <li>elapsed: {n}</li> */}\n        <li>paused: {timeline.paused.toString()}</li>\n        <li>reversed: {timeline.reversed.toString()}</li>\n        <li>completed: {timeline.completed.toString()}</li>\n      </ul>\n      <div>\n        <input\n          type=\"range\"\n          min={0} max={1} step={0.01}\n          value={timeline.progress}\n          onChange={e => timeline.seek(+e.target.value)}\n        />\n        {Math.floor(timeline.progress * 1e4) / 1e2}%\n      </div>\n      <button onClick={timeline.play}>play</button>\n      <button onClick={timeline.reverse}>reverse</button>\n      <button onClick={timeline.pause}>pause</button>\n      <button onClick={timeline.restart}>restart</button>\n      <br />\n      <button onClick={() => timeline.nextStep()}>nextStep</button>\n      <button onClick={() => timeline.nextStep(1, true)}>reverse nextStep</button>\n    </div>\n  );\n};\n",__ADDS_MAP__={"core-usetimeline--syntax":{startLoc:{col:22,line:12},endLoc:{col:30,line:12},startBody:{col:22,line:12},endBody:{col:30,line:12}},"core-usetimeline--demo-1":{startLoc:{col:21,line:14},endLoc:{col:1,line:30},startBody:{col:21,line:14},endBody:{col:1,line:30}},"core-usetimeline--demo-2":{startLoc:{col:21,line:32},endLoc:{col:1,line:72},startBody:{col:21,line:32},endBody:{col:1,line:72}}},__MODULE_DEPENDENCIES__=[],__LOCAL_DEPENDENCIES__={},__IDS_TO_FRAMEWORKS__={},Syntax=(__webpack_exports__.default={title:"core|useTimeline",parameters:{storySource:{source:"import React from 'react';\nimport { useKeyframe, useTimeline } from '../../';\nimport mdx from './useTimeline.mdx';\n\nexport default {\n  title: 'core|useTimeline',\n  parameters: {\n    docs: { page: mdx }\n  }\n}\n\nexport const Syntax = () => '';\n\nexport const Demo1 = () => {\n  const [x, frame] = useTimeline([\n    [useKeyframe(200), 200],\n    [useKeyframe(1000), 100],\n    [useKeyframe(300), 200],\n  ]);\n\n  return (\n    <>\n      <div\n        className=\"ball\"\n        style={{ transform: `translateX(${x}px)` }}\n      />\n      <p><button onClick={frame.play}>动起来</button></p>\n    </>\n  );\n};\n\nexport const Demo2 = () => {\n  const [{ x, y, rotate }, timeline] = useTimeline([\n    [useKeyframe(1500, 'inQuint'), { x: 500 }],\n    [useKeyframe(1000, 'linear'), { x: -300, y: 100, rotate: -360 }],\n  ]);\n\n  timeline.useOnComplete(() => {\n    console.log('animate completed');\n  })\n\n  return (\n    <div>\n      <div\n        className=\"box\"\n        style={{ transform: `translate(${x}px, ${y}px) rotate(${rotate}deg)` }}\n      />\n      <ul>\n        {/* <li>elapsed: {n}</li> */}\n        <li>paused: {timeline.paused.toString()}</li>\n        <li>reversed: {timeline.reversed.toString()}</li>\n        <li>completed: {timeline.completed.toString()}</li>\n      </ul>\n      <div>\n        <input\n          type=\"range\"\n          min={0} max={1} step={0.01}\n          value={timeline.progress}\n          onChange={e => timeline.seek(+e.target.value)}\n        />\n        {Math.floor(timeline.progress * 1e4) / 1e2}%\n      </div>\n      <button onClick={timeline.play}>play</button>\n      <button onClick={timeline.reverse}>reverse</button>\n      <button onClick={timeline.pause}>pause</button>\n      <button onClick={timeline.restart}>restart</button>\n      <br />\n      <button onClick={() => timeline.nextStep()}>nextStep</button>\n      <button onClick={() => timeline.nextStep(1, true)}>reverse nextStep</button>\n    </div>\n  );\n};\n",locationsMap:{"core-usetimeline--syntax":{startLoc:{col:22,line:12},endLoc:{col:30,line:12},startBody:{col:22,line:12},endBody:{col:30,line:12}},"core-usetimeline--demo-1":{startLoc:{col:21,line:14},endLoc:{col:1,line:30},startBody:{col:21,line:14},endBody:{col:1,line:30}},"core-usetimeline--demo-2":{startLoc:{col:21,line:32},endLoc:{col:1,line:72},startBody:{col:21,line:32},endBody:{col:1,line:72}}}},docs:{page:MDXContent}}},addSourceDecorator((function(){return""}),{__STORY__:__STORY__,__ADDS_MAP__:__ADDS_MAP__,__MAIN_FILE_LOCATION__:"/useTimeline.stories.tsx",__MODULE_DEPENDENCIES__:__MODULE_DEPENDENCIES__,__LOCAL_DEPENDENCIES__:__LOCAL_DEPENDENCIES__,__SOURCE_PREFIX__:__SOURCE_PREFIX__,__IDS_TO_FRAMEWORKS__:__IDS_TO_FRAMEWORKS__})),Demo1=addSourceDecorator((function(){var _useTimeline=useTimeline([[Object(useKeyframe.a)(200),200],[Object(useKeyframe.a)(1e3),100],[Object(useKeyframe.a)(300),200]]),_useTimeline2=Object(slicedToArray.a)(_useTimeline,2),x=_useTimeline2[0],frame=_useTimeline2[1];return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("div",{className:"ball",style:{transform:"translateX(".concat(x,"px)")}}),react_default.a.createElement("p",null,react_default.a.createElement("button",{onClick:frame.play},"动起来")))}),{__STORY__:__STORY__,__ADDS_MAP__:__ADDS_MAP__,__MAIN_FILE_LOCATION__:"/useTimeline.stories.tsx",__MODULE_DEPENDENCIES__:__MODULE_DEPENDENCIES__,__LOCAL_DEPENDENCIES__:__LOCAL_DEPENDENCIES__,__SOURCE_PREFIX__:__SOURCE_PREFIX__,__IDS_TO_FRAMEWORKS__:__IDS_TO_FRAMEWORKS__}),useTimeline_stories_ref=react_default.a.createElement("br",null),Demo2=addSourceDecorator((function(){var _useTimeline3=useTimeline([[Object(useKeyframe.a)(1500,"inQuint"),{x:500}],[Object(useKeyframe.a)(1e3,"linear"),{x:-300,y:100,rotate:-360}]]),_useTimeline4=Object(slicedToArray.a)(_useTimeline3,2),_useTimeline4$=_useTimeline4[0],x=_useTimeline4$.x,y=_useTimeline4$.y,rotate=_useTimeline4$.rotate,timeline=_useTimeline4[1];return timeline.useOnComplete((function(){console.log("animate completed")})),react_default.a.createElement("div",null,react_default.a.createElement("div",{className:"box",style:{transform:"translate(".concat(x,"px, ").concat(y,"px) rotate(").concat(rotate,"deg)")}}),react_default.a.createElement("ul",null,react_default.a.createElement("li",null,"paused: ",timeline.paused.toString()),react_default.a.createElement("li",null,"reversed: ",timeline.reversed.toString()),react_default.a.createElement("li",null,"completed: ",timeline.completed.toString())),react_default.a.createElement("div",null,react_default.a.createElement("input",{type:"range",min:0,max:1,step:.01,value:timeline.progress,onChange:function onChange(e){return timeline.seek(+e.target.value)}}),Math.floor(1e4*timeline.progress)/100,"%"),react_default.a.createElement("button",{onClick:timeline.play},"play"),react_default.a.createElement("button",{onClick:timeline.reverse},"reverse"),react_default.a.createElement("button",{onClick:timeline.pause},"pause"),react_default.a.createElement("button",{onClick:timeline.restart},"restart"),useTimeline_stories_ref,react_default.a.createElement("button",{onClick:function onClick(){return timeline.nextStep()}},"nextStep"),react_default.a.createElement("button",{onClick:function onClick(){return timeline.nextStep(1,!0)}},"reverse nextStep"))}),{__STORY__:__STORY__,__ADDS_MAP__:__ADDS_MAP__,__MAIN_FILE_LOCATION__:"/useTimeline.stories.tsx",__MODULE_DEPENDENCIES__:__MODULE_DEPENDENCIES__,__LOCAL_DEPENDENCIES__:__LOCAL_DEPENDENCIES__,__SOURCE_PREFIX__:__SOURCE_PREFIX__,__IDS_TO_FRAMEWORKS__:__IDS_TO_FRAMEWORKS__})},1313:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Syntax",(function(){return Syntax})),__webpack_require__.d(__webpack_exports__,"Demo1",(function(){return Demo1})),__webpack_require__.d(__webpack_exports__,"Demo2",(function(){return Demo2})),__webpack_require__.d(__webpack_exports__,"Demo3",(function(){return Demo3}));var slicedToArray=__webpack_require__(44),react=__webpack_require__(0),react_default=__webpack_require__.n(react),useKeyframe=__webpack_require__(87),lib=__webpack_require__(202),esm=(__webpack_require__(5),__webpack_require__(10),__webpack_require__(2),__webpack_require__(4),__webpack_require__(1)),blocks=__webpack_require__(11);function _extends(){return(_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],0<=excluded.indexOf(key)||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={},_ref2=Object(esm.mdx)(blocks.Story,{id:"core-usekeyframe--syntax",mdxType:"Story"}),_ref3=Object(esm.mdx)("p",null,"语法："),_ref4=Object(esm.mdx)("p",null,"参数说明："),_ref5=Object(esm.mdx)("li",{parentName:"ul"},Object(esm.mdx)("inlineCode",{parentName:"li"},"duration"),"：动画持续时间，默认为1000，单位为毫秒"),_ref6=Object(esm.mdx)("inlineCode",{parentName:"li"},"easing"),_ref7=Object(esm.mdx)("inlineCode",{parentName:"li"},"'linear'"),_ref8=Object(esm.mdx)("li",{parentName:"ul"},Object(esm.mdx)("inlineCode",{parentName:"li"},"elapsed"),"：经过时间，还没开始执行动画前为 0 ，动画结束后为 1 ，动画运动过程中就是 0 到 1 之间。"),_ref9=Object(esm.mdx)("li",{parentName:"ul"},Object(esm.mdx)("inlineCode",{parentName:"li"},"frame"),"：帧对象，包含了一些动画属性和方法。",Object(esm.mdx)("ul",{parentName:"li"},Object(esm.mdx)("li",{parentName:"ul"},Object(esm.mdx)("inlineCode",{parentName:"li"},"progress"),"：当前运动进度，值为0到1。"),Object(esm.mdx)("li",{parentName:"ul"},Object(esm.mdx)("inlineCode",{parentName:"li"},"paused"),"：是否暂停。"),Object(esm.mdx)("li",{parentName:"ul"},Object(esm.mdx)("inlineCode",{parentName:"li"},"completed"),"：是否已完成动画，正向运动 ",Object(esm.mdx)("inlineCode",{parentName:"li"},"elapsed")," 为 1 时视为已完成，反向运动为 0 时视为已完成。"),Object(esm.mdx)("li",{parentName:"ul"},Object(esm.mdx)("inlineCode",{parentName:"li"},"reversed"),"：是否正处于反向运动"),Object(esm.mdx)("li",{parentName:"ul"},Object(esm.mdx)("inlineCode",{parentName:"li"},"start(isReverse?: boolean)"),"：从当前位置开始执行动画，若 ",Object(esm.mdx)("inlineCode",{parentName:"li"},"isReverse")," 没传值则代表当前方向。此方法处于静止状态或者以相反的运动方向执行才能生效。"),Object(esm.mdx)("li",{parentName:"ul"},Object(esm.mdx)("inlineCode",{parentName:"li"},"play()"),"：以正向运动方向执行动画。"),Object(esm.mdx)("li",{parentName:"ul"},Object(esm.mdx)("inlineCode",{parentName:"li"},"reverse()"),"：以反向运动方向执行动画。"),Object(esm.mdx)("li",{parentName:"ul"},Object(esm.mdx)("inlineCode",{parentName:"li"},"pause()"),"：暂停动画。"),Object(esm.mdx)("li",{parentName:"ul"},Object(esm.mdx)("inlineCode",{parentName:"li"},"restart()"),"：从头开始执行动画，以正向方向运动。"),Object(esm.mdx)("li",{parentName:"ul"},Object(esm.mdx)("inlineCode",{parentName:"li"},"seek(currentElapsed: number, isReverse?: boolean)"),"：暂停动画，并移动到指定位置。"),Object(esm.mdx)("li",{parentName:"ul"},Object(esm.mdx)("inlineCode",{parentName:"li"},"useOnComplete(fn: () => void)"),": 用于监听动画完成事件的 hook 方法"))),_ref10=Object(esm.mdx)(blocks.Preview,{isColumn:!0,mdxType:"Preview"},Object(esm.mdx)("h4",{className:"preview-title"},"基本使用"),Object(esm.mdx)(blocks.Story,{id:"core-usekeyframe--demo-1",mdxType:"Story"})),_ref11=Object(esm.mdx)(blocks.Preview,{isColumn:!0,mdxType:"Preview"},Object(esm.mdx)("h4",{className:"preview-title"},"无限来回运动"),Object(esm.mdx)(blocks.Story,{id:"core-usekeyframe--demo-2",mdxType:"Story"})),_ref12=Object(esm.mdx)(blocks.Preview,{isColumn:!0,mdxType:"Preview"},Object(esm.mdx)("h4",{className:"preview-title"},"综合例子"),Object(esm.mdx)(blocks.Story,{id:"core-usekeyframe--demo-3",mdxType:"Story"}));function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,["components"]);return Object(esm.mdx)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),_ref2,Object(esm.mdx)("h1",{id:"usekeyframe"},"useKeyframe"),_ref3,Object(esm.mdx)("pre",null,Object(esm.mdx)("code",{parentName:"pre",className:"language-ts"},"const [elapsed, frame] = useKeyframe(duration: number, easing: string|(number => number));\n")),_ref4,Object(esm.mdx)("ul",null,_ref5,Object(esm.mdx)("li",{parentName:"ul"},_ref6,"：动画运动曲线，默认为 ",_ref7,", 值是字符串时使用 ",Object(esm.mdx)("a",{parentName:"li",href:"https://github.com/streamich/ts-easing/blob/master/src/index.ts",target:"_blank",rel:"nofollow noopener noreferrer"},"预设值")," ，预设值对应的运动效果可到 ",Object(esm.mdx)("a",{parentName:"li",href:"https://www.createjs.com/demos/tweenjs/tween_sparktable",target:"_blank",rel:"nofollow noopener noreferrer"},"这里")," 查看，后续会整合一下。如果值是函数则代表自定义运动曲线。"),_ref8,_ref9),Object(esm.mdx)("h2",{id:"示例"},"示例"),_ref10,_ref11,_ref12)}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0,MDXContent.__docgenInfo={description:"",methods:[],displayName:"MDXContent"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/core/useKeyframe/useKeyframe.mdx"]={name:"MDXContent",docgenInfo:MDXContent.__docgenInfo,path:"src/core/useKeyframe/useKeyframe.mdx"});__webpack_require__(193).withSource;var addSourceDecorator=__webpack_require__(193).addSource,__SOURCE_PREFIX__="/Users/jencia/Workspace/github/xxreact-xxuse-xxtween/src/core/useKeyframe",__STORY__="import React, { useState, useEffect } from 'react';\nimport useKeyframe from '.';\nimport { easing } from 'ts-easing';\nimport mdx from './useKeyframe.mdx';\n\nexport default {\n  title: 'core|useKeyframe',\n  parameters: {\n    docs: { page: mdx }\n  }\n}\n\nexport const Syntax = () => '';\n\nexport const Demo1 = () => {\n  const [n, frame] = useKeyframe(2000);\n\n  return (\n    <>\n      <div\n        className=\"ball\"\n        style={{ transform: `translateX(${n * 300}px)` }}\n      />\n      <p><button onClick={frame.play}>动起来</button></p>\n    </>\n  );\n};\n\nexport const Demo2 = () => {\n  const [n, frame] = useKeyframe(2000);\n\n  useEffect(frame.play, []);\n\n  frame.useOnComplete(() => {\n    frame.start(!frame.reversed);\n  })\n\n  return (\n    <div\n      className=\"ball\"\n      style={{ transform: `translateX(${n * 300}px)` }}\n    />\n  );\n};\n\nexport const Demo3 = () => {\n  const [easingName, setEasingName] = useState('linear');\n  const [n, frame] = useKeyframe(2000, easingName);\n\n  frame.useOnComplete(() => {\n    console.log('animate completed');\n  })\n\n  return (\n    <div>\n      <div\n        className=\"ball\"\n        style={{ transform: `translateX(${n * 500}px)` }}\n      />\n      <ul>\n        <li>elapsed: {n}</li>\n        <li>paused: {frame.paused.toString()}</li>\n        <li>reversed: {frame.reversed.toString()}</li>\n        <li>completed: {frame.completed.toString()}</li>\n        <li>\n          easing：\n          <select\n            value={easingName}\n            onChange={e => {\n              setEasingName(e.target.value);\n              frame.restart();\n            }}\n          >\n            {Object.keys(easing).map(key => (\n              <option key={key} value={key}>{key}</option>\n            ))}\n          </select>\n        </li>\n      </ul>\n      <div>\n        <input\n          type=\"range\"\n          min={0} max={1} step={0.01}\n          value={frame.progress}\n          onChange={e => frame.seek(+e.target.value)}\n        />\n        {Math.floor(frame.progress * 1e4) / 1e2}%\n      </div>\n      <button onClick={frame.play}>play</button>\n      <button onClick={frame.reverse}>reverse</button>\n      <button onClick={frame.pause}>pause</button>\n      <button onClick={frame.restart}>restart</button>\n    </div>\n  );\n};\n",__ADDS_MAP__={"core-usekeyframe--syntax":{startLoc:{col:22,line:13},endLoc:{col:30,line:13},startBody:{col:22,line:13},endBody:{col:30,line:13}},"core-usekeyframe--demo-1":{startLoc:{col:21,line:15},endLoc:{col:1,line:27},startBody:{col:21,line:15},endBody:{col:1,line:27}},"core-usekeyframe--demo-2":{startLoc:{col:21,line:29},endLoc:{col:1,line:44},startBody:{col:21,line:29},endBody:{col:1,line:44}},"core-usekeyframe--demo-3":{startLoc:{col:21,line:46},endLoc:{col:1,line:95},startBody:{col:21,line:46},endBody:{col:1,line:95}}},__MODULE_DEPENDENCIES__=[],__LOCAL_DEPENDENCIES__={},__IDS_TO_FRAMEWORKS__={},Syntax=(__webpack_exports__.default={title:"core|useKeyframe",parameters:{storySource:{source:"import React, { useState, useEffect } from 'react';\nimport useKeyframe from '.';\nimport { easing } from 'ts-easing';\nimport mdx from './useKeyframe.mdx';\n\nexport default {\n  title: 'core|useKeyframe',\n  parameters: {\n    docs: { page: mdx }\n  }\n}\n\nexport const Syntax = () => '';\n\nexport const Demo1 = () => {\n  const [n, frame] = useKeyframe(2000);\n\n  return (\n    <>\n      <div\n        className=\"ball\"\n        style={{ transform: `translateX(${n * 300}px)` }}\n      />\n      <p><button onClick={frame.play}>动起来</button></p>\n    </>\n  );\n};\n\nexport const Demo2 = () => {\n  const [n, frame] = useKeyframe(2000);\n\n  useEffect(frame.play, []);\n\n  frame.useOnComplete(() => {\n    frame.start(!frame.reversed);\n  })\n\n  return (\n    <div\n      className=\"ball\"\n      style={{ transform: `translateX(${n * 300}px)` }}\n    />\n  );\n};\n\nexport const Demo3 = () => {\n  const [easingName, setEasingName] = useState('linear');\n  const [n, frame] = useKeyframe(2000, easingName);\n\n  frame.useOnComplete(() => {\n    console.log('animate completed');\n  })\n\n  return (\n    <div>\n      <div\n        className=\"ball\"\n        style={{ transform: `translateX(${n * 500}px)` }}\n      />\n      <ul>\n        <li>elapsed: {n}</li>\n        <li>paused: {frame.paused.toString()}</li>\n        <li>reversed: {frame.reversed.toString()}</li>\n        <li>completed: {frame.completed.toString()}</li>\n        <li>\n          easing：\n          <select\n            value={easingName}\n            onChange={e => {\n              setEasingName(e.target.value);\n              frame.restart();\n            }}\n          >\n            {Object.keys(easing).map(key => (\n              <option key={key} value={key}>{key}</option>\n            ))}\n          </select>\n        </li>\n      </ul>\n      <div>\n        <input\n          type=\"range\"\n          min={0} max={1} step={0.01}\n          value={frame.progress}\n          onChange={e => frame.seek(+e.target.value)}\n        />\n        {Math.floor(frame.progress * 1e4) / 1e2}%\n      </div>\n      <button onClick={frame.play}>play</button>\n      <button onClick={frame.reverse}>reverse</button>\n      <button onClick={frame.pause}>pause</button>\n      <button onClick={frame.restart}>restart</button>\n    </div>\n  );\n};\n",locationsMap:{"core-usekeyframe--syntax":{startLoc:{col:22,line:13},endLoc:{col:30,line:13},startBody:{col:22,line:13},endBody:{col:30,line:13}},"core-usekeyframe--demo-1":{startLoc:{col:21,line:15},endLoc:{col:1,line:27},startBody:{col:21,line:15},endBody:{col:1,line:27}},"core-usekeyframe--demo-2":{startLoc:{col:21,line:29},endLoc:{col:1,line:44},startBody:{col:21,line:29},endBody:{col:1,line:44}},"core-usekeyframe--demo-3":{startLoc:{col:21,line:46},endLoc:{col:1,line:95},startBody:{col:21,line:46},endBody:{col:1,line:95}}}},docs:{page:MDXContent}}},addSourceDecorator((function(){return""}),{__STORY__:__STORY__,__ADDS_MAP__:__ADDS_MAP__,__MAIN_FILE_LOCATION__:"/useKeyframe.stories.tsx",__MODULE_DEPENDENCIES__:__MODULE_DEPENDENCIES__,__LOCAL_DEPENDENCIES__:__LOCAL_DEPENDENCIES__,__SOURCE_PREFIX__:__SOURCE_PREFIX__,__IDS_TO_FRAMEWORKS__:__IDS_TO_FRAMEWORKS__})),Demo1=addSourceDecorator((function(){var _useKeyframe=Object(useKeyframe.a)(2e3),_useKeyframe2=Object(slicedToArray.a)(_useKeyframe,2),n=_useKeyframe2[0],frame=_useKeyframe2[1];return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("div",{className:"ball",style:{transform:"translateX(".concat(300*n,"px)")}}),react_default.a.createElement("p",null,react_default.a.createElement("button",{onClick:frame.play},"动起来")))}),{__STORY__:__STORY__,__ADDS_MAP__:__ADDS_MAP__,__MAIN_FILE_LOCATION__:"/useKeyframe.stories.tsx",__MODULE_DEPENDENCIES__:__MODULE_DEPENDENCIES__,__LOCAL_DEPENDENCIES__:__LOCAL_DEPENDENCIES__,__SOURCE_PREFIX__:__SOURCE_PREFIX__,__IDS_TO_FRAMEWORKS__:__IDS_TO_FRAMEWORKS__}),Demo2=addSourceDecorator((function(){var _useKeyframe3=Object(useKeyframe.a)(2e3),_useKeyframe4=Object(slicedToArray.a)(_useKeyframe3,2),n=_useKeyframe4[0],frame=_useKeyframe4[1];return Object(react.useEffect)(frame.play,[]),frame.useOnComplete((function(){frame.start(!frame.reversed)})),react_default.a.createElement("div",{className:"ball",style:{transform:"translateX(".concat(300*n,"px)")}})}),{__STORY__:__STORY__,__ADDS_MAP__:__ADDS_MAP__,__MAIN_FILE_LOCATION__:"/useKeyframe.stories.tsx",__MODULE_DEPENDENCIES__:__MODULE_DEPENDENCIES__,__LOCAL_DEPENDENCIES__:__LOCAL_DEPENDENCIES__,__SOURCE_PREFIX__:__SOURCE_PREFIX__,__IDS_TO_FRAMEWORKS__:__IDS_TO_FRAMEWORKS__}),Demo3=addSourceDecorator((function(){var _useState=Object(react.useState)("linear"),_useState2=Object(slicedToArray.a)(_useState,2),easingName=_useState2[0],setEasingName=_useState2[1],_useKeyframe5=Object(useKeyframe.a)(2e3,easingName),_useKeyframe6=Object(slicedToArray.a)(_useKeyframe5,2),n=_useKeyframe6[0],frame=_useKeyframe6[1];return frame.useOnComplete((function(){console.log("animate completed")})),react_default.a.createElement("div",null,react_default.a.createElement("div",{className:"ball",style:{transform:"translateX(".concat(500*n,"px)")}}),react_default.a.createElement("ul",null,react_default.a.createElement("li",null,"elapsed: ",n),react_default.a.createElement("li",null,"paused: ",frame.paused.toString()),react_default.a.createElement("li",null,"reversed: ",frame.reversed.toString()),react_default.a.createElement("li",null,"completed: ",frame.completed.toString()),react_default.a.createElement("li",null,"easing：",react_default.a.createElement("select",{value:easingName,onChange:function onChange(e){setEasingName(e.target.value),frame.restart()}},Object.keys(lib.easing).map((function(key){return react_default.a.createElement("option",{key:key,value:key},key)}))))),react_default.a.createElement("div",null,react_default.a.createElement("input",{type:"range",min:0,max:1,step:.01,value:frame.progress,onChange:function onChange(e){return frame.seek(+e.target.value)}}),Math.floor(1e4*frame.progress)/100,"%"),react_default.a.createElement("button",{onClick:frame.play},"play"),react_default.a.createElement("button",{onClick:frame.reverse},"reverse"),react_default.a.createElement("button",{onClick:frame.pause},"pause"),react_default.a.createElement("button",{onClick:frame.restart},"restart"))}),{__STORY__:__STORY__,__ADDS_MAP__:__ADDS_MAP__,__MAIN_FILE_LOCATION__:"/useKeyframe.stories.tsx",__MODULE_DEPENDENCIES__:__MODULE_DEPENDENCIES__,__LOCAL_DEPENDENCIES__:__LOCAL_DEPENDENCIES__,__SOURCE_PREFIX__:__SOURCE_PREFIX__,__IDS_TO_FRAMEWORKS__:__IDS_TO_FRAMEWORKS__})},460:function(module,exports,__webpack_require__){__webpack_require__(461),__webpack_require__(614),__webpack_require__(615),__webpack_require__(1271),__webpack_require__(1272),module.exports=__webpack_require__(1274)},526:function(module,exports){},87:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return useKeyframe}));var slicedToArray=__webpack_require__(44),react=__webpack_require__(0),lib=__webpack_require__(202),useKeyframe=function(){var ms=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1e3,easing=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"linear",_useState=Object(react.useState)(0),_useState2=Object(slicedToArray.a)(_useState,2),elapsed=_useState2[0],setElapsed=_useState2[1],isUnmounted=Object(react.useRef)(!1),_useReducer=Object(react.useReducer)((function(n){return n+1}),0),_useReducer2=Object(slicedToArray.a)(_useReducer,2),update=_useReducer2[1],raf=Object(react.useRef)(null),tmpElapsed=Object(react.useRef)(0),startTime=Object(react.useRef)(0),completed=Object(react.useRef)(!1),paused=Object(react.useRef)(!0),reversed=Object(react.useRef)(!1),setRaf=function(onFrame){raf.current=requestAnimationFrame(onFrame)},clearRaf=function(){raf.current&&cancelAnimationFrame(raf.current)},onFrame=function(){var pauseElapsed=reversed.current?1-tmpElapsed.current:tmpElapsed.current,currElapsed=Math.min(1,(Date.now()-startTime.current)/ms+pauseElapsed);setElapsed(reversed.current?1-currElapsed:currElapsed),1===currElapsed?(clearRaf(),paused.current=!0,completed.current=!0,tmpElapsed.current=+reversed.current,update()):setRaf(onFrame)},run=function(){isUnmounted.current||(clearRaf(),paused.current=!1,completed.current=!1,startTime.current=Date.now(),setRaf(onFrame))},start=function(isReverse){void 0===isReverse&&(isReverse=reversed.current),reversed.current!==isReverse?(reversed.current=isReverse,tmpElapsed.current=elapsed,run()):paused.current&&run()};Object(react.useLayoutEffect)((function(){return function(){clearRaf(),isUnmounted.current=!0}}),[]);var easingFn="string"==typeof easing?lib.easing[easing]:easing,result=elapsed;try{result=easingFn(elapsed),1===elapsed&&1!==result&&(result=1)}catch(e){0}return[result,{progress:elapsed,reversed:reversed.current,paused:paused.current,completed:completed.current,start:start,play:function play(){start(!1)},pause:function pause(){isUnmounted.current||[0,1].includes(elapsed)||(clearRaf(),tmpElapsed.current=elapsed,paused.current=!0,update())},restart:function restart(){isUnmounted.current||(setElapsed(0),reversed.current=!1,tmpElapsed.current=0,run())},seek:function seek(){var currElapsed=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,isReverse=1<arguments.length?arguments[1]:void 0;if(!isUnmounted.current){var _currElapsed=Math.max(Math.min(currElapsed,1),0),currReversed=void 0===isReverse?reversed.current:isReverse,_completed=_currElapsed===+!currReversed;tmpElapsed.current=_completed?+currReversed:_currElapsed,reversed.current=currReversed,paused.current=!0,completed.current=_completed,clearRaf(),setElapsed(_currElapsed)}},reverse:function reverse(){start(!0)},useOnComplete:function useOnComplete(fn){Object(react.useLayoutEffect)((function(){completed.current&&fn&&fn()}),[completed.current])}}]}}},[[460,1,2]]]);
//# sourceMappingURL=main.5767464c9b655dd7ed8f.bundle.js.map